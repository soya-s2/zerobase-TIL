# 2021-10-13-Wed

<br/>

## 17. ì„ í˜• ì¡°ì‚¬ë²• í•´ì‹œ í…Œì´ë¸”

### ğŸ¦¢ ê°œìš”

**`ì„ í˜• ì¡°ì‚¬ë²• í•´ì‹œ í…Œì´ë¸”`**ì´ë€,  
í•´ì‹œ ì¶©ëŒ ë°œìƒ ì‹œ, ë‹¤ìŒ ì£¼ì†Œë¥¼ í™•ì¸í•˜ê³  ë¹„ì–´ìˆìœ¼ë©´
ê·¸ ìë¦¬ì— ëŒ€ì‹  ë„£ëŠ” í•´ì‹œ í…Œì´ë¸” ê¸°ë°˜ì˜ ìë£Œêµ¬ì¡°ì´ë‹¤.

<br/>

ì—¬ê¸°ì„œ âš¡ **í•´ì‹œ ì¶©ëŒ**ì´ë€, í•´ì‹œ í•¨ìˆ˜ì— ì˜í•´  
keyê°€ ë‹¤ë¦„ì—ë„ ë¶ˆêµ¬í•˜ê³  ê°™ì€ indexì— ë°°ì¹˜ë˜ì–´  
ê°’ì´ ì •ìƒì ìœ¼ë¡œ ë“¤ì–´ê°€ê±°ë‚˜ ì§€ì›Œì§€ì§€ ì•ŠëŠ” ë“±  
ì œëŒ€ë¡œ ì—°ì‚°í•  ìˆ˜ ì—†ëŠ”, ì¶œë ¥ ê²°ê³¼ë¥¼ ì˜ˆìƒí•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì´ë‹¤.  
ê¸°ë³¸ì ìœ¼ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í•´ì‹œ í…Œì´ë¸”ì˜ í¬ê¸°ë¥¼ ëŠ˜ë¦¬ê±°ë‚˜  
í•´ì‹œ í•¨ìˆ˜ë¥¼ ë³€ê²½í•´ì„œ ì–´ëŠì •ë„ëŠ” í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤.

<br/>

```js
const HASH_SIZE = 1013;

HashTable.prototype.hashCode = function (key) {
  let hash = 5381;
  for (let i = 0; i < key.length; i++) {
    hash = hash * 33 + key.charCodeAt(i);
  }
  return hash % HASH_SIZE;
};
```

<br/>

ê¸°ì¡´ì˜ `hashCode()` ë©”ì„œë“œëŠ” `loselose`ë¼ëŠ” í•´ì‹œ í•¨ìˆ˜ì˜€ëŠ”ë°,  
ì´ë²ˆì—ëŠ” `djb2`ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ  
í›¨ì”¬ ì‹ì„ ë³µì¡í•˜ê²Œ ë§Œë“¤ê³  í•´ì‹œ í…Œì´ë¸”ì˜ í¬ê¸°ë„ ëŠ˜ë ¸ë‹¤.  
ì›ë˜ì˜ `hash` ê°’ì€ 0ìœ¼ë¡œ ì´ˆê¸°í™” ë˜ì—ˆìœ¼ë‚˜,  
ì—¬ê¸°ì—ì„œëŠ” 5381ë¡œ ì´ˆê¸°í™”í•˜ì—¬ `seed` ê°’ìœ¼ë¡œ ì¼ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.  
í•˜ì§€ë§Œ ì´ê²ƒì´ í•´ì‹œ ì¶©ëŒì„ ë¬´ì¡°ê±´ì ìœ¼ë¡œ ë§‰ì„ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì•„ë‹ˆê¸°ì—  
ìš°ë¦¬ëŠ” ì„ í˜• ì¡°ì‚¬ë²• í•´ì‹œ í…Œì´ë¸”ì„ ë°°ì›Œë³´ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

<br/>
<br/>
<br/>

### ğŸ¦¢ êµ¬í˜„

#### ğŸ€ í•´ì‹œ í…Œì´ë¸” í¬ê¸° ì¡°ì •

```js
const HASH_SIZE = 5;
```

ì¶©ëŒì´ ë˜ëŠ” ê²ƒì„ ì§ì ‘ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´  
í•´ì‹œ í…Œì´ë¸” í¬ê¸°ë¥¼ ë§ì´ ì¤„ì—¬ë†“ëŠ”ë‹¤!

<br/>
<br/>

#### ğŸ€ Element ìƒì„±ì í•¨ìˆ˜

```js
function Element(key, value) {
  this.key = key;
  this.value = value;
}
```

ìƒì„±ì í•¨ìˆ˜ë¥¼ ë¹„ë¡¯í•˜ì—¬ ëŒ€ë¶€ë¶„ì˜ ë©”ì„œë“œëŠ” ë™ì¼í•˜ë‹¤.  
`put()`, `get()`, `remove()` ë©”ì„œë“œì˜ êµ¬í˜„ì—ì„œ ì°¨ì´ì ì„ ë³´ì¸ë‹¤.

<br/>
<br/>

#### ğŸ€ LinearHashTable ìƒì„±ì í•¨ìˆ˜

```js
function LinearHashTable() {
  this.table = new Array(HASH_SIZE);
  this.length = 0;
}
```

<br/>
<br/>

#### ğŸ€ hashCode(key) ë©”ì„œë“œ

```js
LinearHashTable.prototype.hashCode = function (key) {
  let hash = 0;
  for (let i = 0; i < key.length; i++) {
    hash += key.charCodeAt(i);
  }
  return hash % HASH_SIZE;
};
```

<br/>
<br/>

#### ğŸ€ clear() ë©”ì„œë“œ

```js
LinearHashTable.prototype.clear = function () {
  this.table = new Array(HASH_SIZE);
  this.length = 0;
};
```

<br/>
<br/>

#### ğŸ€ size() ë©”ì„œë“œ

```js
LinearHashTable.prototype.size = function () {
  return this.length;
};
```

<br/>
<br/>

#### ğŸ€ getBuffer() ë©”ì„œë“œ

```js
LinearHashTable.prototype.getBuffer = function () {
  let array = [];
  for (let i = 0; i < this.table.length; i++) {
    if (this.table[i]) {
      array.push(this.table[i]);
    }
  }
  return array;
};
```

<br/>
<br/>

#### ğŸ€ print() ë©”ì„œë“œ

```js
LinearHashTable.prototype.print = function () {
  for (let i = 0; i < this.table.length; i++) {
    if (this.table[i]) {
      console.log(i + " -> " + this.table[i].key + ": " + this.table[i].value);
    }
  }
};
```

<br/>
<br/>

#### ğŸ€ put(key, value) ë©”ì„œë“œ

```js
LinearHashTable.prototype.put = function (key, value) {
  let index = this.hashCode(key);
  let startIndex = index;
  console.log(`key: ${key} -> index: ${index}`);

  do {
    if (this.table[index] === undefined) {
      this.table[index] = new Element(key, value);
      this.length++;
      return true;
    }

    index = (index + 1) % HASH_SIZE;
  } while (index !== startIndex);

  return false;
};
```

`index`ëŠ” `key`ì˜ í•´ì‹œ í•¨ìˆ˜ë¥¼ ê±°ì¹œ ê°’ì´ê³ ,  
ì´ë¥¼ `startIndex`ì— ì €ì¥í•´ë‘”ë‹¤.  
`console.log(~)` ì•ˆì˜ ë‚´ìš©ìœ¼ë¡œ ë””ë²„ê¹…ì„ ìš©ì´í•˜ê²Œ í•œë‹¤.

<br/>

**ë§Œì•½ í•´ì‹œ í…Œì´ë¸”ì— ê°’ì´ ì—†ìœ¼ë©´**(undefined),  
`key`ì™€ `value` ê°’ìœ¼ë¡œ ìƒˆ `Element`ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ ì¸ë±ìŠ¤ì— ê°’ì„ ë„£ëŠ”ë‹¤.  
í•˜ì§€ë§Œ **ê°’ì´ ìˆë‹¤ë©´** ê·¸ ìë¦¬ì— ë„£ì§€ ì•Šê¸°ë¡œ í–ˆìœ¼ë¯€ë¡œ  
indexë¥¼ 1 ì¦ê°€ì‹œí‚¨ ê°’ì— `HASH_SIZE`ì™€ì˜ mod ì—°ì‚°ì„ í•˜ì—¬  
indexë¥¼ ì›í˜• íì²˜ëŸ¼ ê³„ì† ì¦ê°€í•˜ë©´ì„œ ë˜ëŒì•„ì˜¤ê²Œ ë§Œë“ ë‹¤.  
ë§Œì•½ ì´ë ‡ê²Œ ê³„ì† ì¸ë±ìŠ¤ê°€ ìˆœíšŒí•˜ë©´ì„œ ë“¤ì–´ê°ˆ ê³³ì„ ì°¾ì§€ë§Œ ì—†ë‹¤ë©´  
ì´ê²ƒì€ ì²˜ìŒ indexì™€ ë˜ëŒì•„ ì˜¨ indexê°€ ê°™ì•„ì§€ëŠ” ìˆœê°„ì´ë¯€ë¡œ(ê³µê°„ì´ ì—†ìŒ)  
`do/whileë¬¸`ì„ ì¢…ë£Œí•˜ê³  `false`ë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤.

<br/>
<br/>

#### ğŸ€ get(key) ë©”ì„œë“œ

```js
LinearHashTable.prototype.get = function (key) {
  let index = this.hashCode(key);
  let startIndex = index;

  do {
    if (this.table[index] !== undefined && this.table[index].key === key) {
      return this.table[index].value;
    }

    index = (index + 1) % HASH_SIZE;
  } while (index !== startIndex);

  return undefined;
};
```

`put(key)` ë©”ì„œë“œì™€ ë‚´ë¶€ êµ¬í˜„ ì›ë¦¬ëŠ” ë¹„ìŠ·í•˜ë‚˜,  
ê°’ì„ ì°¾ì•„ì•¼ í•˜ëŠ” ê²ƒì´ `get()` ë©”ì„œë“œì´ë¯€ë¡œ  
**ê°’ì´ ìˆìœ¼ë©´ì„œ**ë„ í•´ë‹¹ **í•´ì‹œ í…Œì´ë¸” ì¸ë±ìŠ¤ì˜ í‚¤ê°€**  
**ì…ë ¥ ì¸ìë¡œ ë°›ì€ keyì™€ ë™ì¼í•œì§€**ë„ ê²€ì‚¬í•œë‹¤.

<br/>
<br/>

#### ğŸ€ remove(key) ë©”ì„œë“œ

```js
LinearHashTable.prototype.remove = function (key) {
  let index = this.hashCode(key);
  let startIndex = index;

  do {
    if (this.table[index] !== undefined && this.table[index].key === key) {
      let element = this.table[index];
      delete this.table[index];
      this.length--;

      return element;
    }

    index = (index + 1) % HASH_SIZE;
  } while (index !== startIndex);

  return undefined;
};
```

keyë¥¼ í•´ì‹œ í•¨ìˆ˜ì— ë„£ì–´ ë‚˜ì˜¨ indexë¥¼ ê¸°ë°˜ìœ¼ë¡œ,  
í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ê°’ì„ `element`ë¡œ ì§€ì •í•´ë‘”ë‹¤.

<br/>

**ê°’ì´ ìˆìœ¼ë©´ì„œ í‚¤ê°€ ê°™ë‹¤ë©´**, ìš°ë¦¬ê°€ removeí•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í•œë‹¤.  
ê·¸ëŸ¬ë¯€ë¡œ `delete` í‚¤ì›Œë“œë¡œ í•´ë‹¹ elementë¥¼ ì§€ìš°ê³ , ê¸¸ì´ë„ ê°ì†Œì‹œí‚¨ë‹¤.  
ê·¸ë¦¬ê³  elementë¥¼ ë°˜í™˜í•˜ì—¬ ì–´ë–¤ ê°’ì„ ì§€ì› ëŠ”ì§€ ì•Œ ìˆ˜ ìˆê²Œ í•œë‹¤.

<br/>
 
**ë§Œì•½ í‚¤ê°€ ì—†ê±°ë‚˜ í‚¤ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´**,   
`(index + 1) % HASH_SIZE` ì—°ì‚°ì„ í•˜ì—¬  
ì¸ë±ìŠ¤ë¥¼ 1ì”© ì¦ê°€ì‹œí‚¤ë©° ìˆœíšŒí•˜ë„ë¡ í•œë‹¤.  
ë§Œì•½ ëª¨ë“  ìˆœíšŒë¥¼ ëëƒˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  indexê°€ ì²˜ìŒ indexì™€ ê°™ì•„ì¡Œë‹¤ë©´  
ì§€ìš¸ ìˆ˜ ìˆëŠ” elementê°€ ì—†ëŠ” ê²ƒì´ë¯€ë¡œ ë°˜ë³µë¬¸ì„ ì¢…ë£Œí•˜ê³  `undefined`ë¥¼ ë°˜í™˜í•œë‹¤.

<br/>
<br/>
<br/>
